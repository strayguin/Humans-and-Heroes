<!DOCTYPE html>
<html>
<head>
<meta charset="ASCII" />
<link rel="stylesheet" type="text/css" href="../themes/solitudecherry.css" />
<link rel="shortcut icon" type="image/x-icon" href="../images/google-default.ico" />
<title>Point Counter - Humans &amp; Heroes SRD</title>
</head>
<body>
<table class="table-body">
<tr>
<td id="sites-chrome-sidebar-left" class="sites-layout-sidebar-left">
<script type="text/javascript" src="../themes/side bar.js"></script>
</td>
<td>
<div id="sites-canvas" style="margin-left: 10px;">
<div style="font-size:16px">
<table border="0" cellspacing="0" style="width:100%;margin:0px 0px 10px 0px">
<tbody>
<tr>
<td class="generated-class-41"><input type="text" id="HeroName" value="Hero Name" /><input type="button" value="Clear Abilities" onClick="Main.abilitySection.clear();" /><input type="button" value="Clear All" onClick="Main.clear();" /></td>
<td class="generated-class-46"><span id="Transcendence span">Transcendence <input type="text" id="transcendence" size="1" value="0" onChange="Main.changeTranscendence();" /></span></td>
<td class="character-sheet-power-level">PL <span id="power level">0</span></td>
</tr>
</tbody>
</table>
<table border="0" cellpadding="10" cellspacing="5" style="width:100%;margin:0px 0px 10px 0px">
<tbody>
<tr>
<td class="character-sheet-ability-label">STRENGTH</td>
<td class="character-sheet-ability-label">AGILITY</td>
<td class="character-sheet-ability-label">FIGHTING</td>
<td class="character-sheet-ability-label">AWARENESS</td>
<td rowspan="4" class="generated-class-14">
<div class="generated-class-48">
<img border="0" src="../images/Sirocco.jpg" id="characterImage" height="270" />
<br />
<span>Image Path:</span><input type="text" value="../images/Sirocco.jpg" id="imgFilePath" /><input type="button" value="Load Image From Path" onClick="Main.loadImageFromPath();" /><br />
<input type="file" accept="image/*" id="imgFileChooser" /><input type="button" value="Load Image From File" onClick="Main.loadImageFromFile();" />
</div>
</td>
</tr>
<tr>
<td class="character-sheet-ability-value"><input type="text" id="Strength" size="1" value="0" onChange="Main.abilitySection.getByName('Strength').change();" /></td>
<td class="character-sheet-ability-value"><input type="text" id="Agility" size="1" value="0" onChange="Main.abilitySection.getByName('Agility').change();" /></td>
<td class="character-sheet-ability-value"><input type="text" id="Fighting" size="1" value="0" onChange="Main.abilitySection.getByName('Fighting').change();" /></td>
<td class="character-sheet-ability-value"><input type="text" id="Awareness" size="1" value="0" onChange="Main.abilitySection.getByName('Awareness').change();" /></td>
</tr>
<tr>
<td class="character-sheet-ability-label">STAMINA</td>
<td class="character-sheet-ability-label">DEXTERITY</td>
<td class="character-sheet-ability-label">INTELLECT</td>
<td class="character-sheet-ability-label">PRESENCE</td>
</tr>
<tr>
<td class="character-sheet-ability-value"><input type="text" id="Stamina" size="1" value="0" onChange="Main.abilitySection.getByName('Stamina').change();" /></td>
<td class="character-sheet-ability-value"><input type="text" id="Dexterity" size="1" value="0" onChange="Main.abilitySection.getByName('Dexterity').change();" /></td>
<td class="character-sheet-ability-value"><input type="text" id="Intellect" size="1" value="0" onChange="Main.abilitySection.getByName('Intellect').change();" /></td>
<td class="character-sheet-ability-value"><input type="text" id="Presence" size="1" value="0" onChange="Main.abilitySection.getByName('Presence').change();" /></td>
</tr>
</tbody>
</table>
<table border="0" cellspacing="0" style="width:100%;margin:10px 0px 0px 0px">
<tbody>
<tr>
<td colspan="4" class="character-sheet-section-label">POWERS <input type="button" value="Clear Powers" onClick="Main.powerSection.clear();" /></td>
</tr>
<tr>
<td colspan="4" class="character-sheet-light-green">
<div id="power section"></div>
</td>
</tr>
<tr>
<td class="character-sheet-section-label">EQUIPMENT <input type="button" value="Clear Equipment" onClick="Main.equipmentSection.clear();" /></td>
<td class="character-sheet-section-label"></td>
<td class="character-sheet-section-label"><span id="equipment points used">0</span> / <span id="equipment points max">0</span></td>
<td class="character-sheet-section-label"></td>
</tr>
<tr>
<td colspan="4" class="character-sheet-light-green">
<div id="equipment section"></div>
</td>
</tr>
<tr>
<td colspan="4" class="character-sheet-section-label">ADVANTAGES <input type="button" value="Clear Advantages" onClick="Main.advantageSection.clear();" /></td>
</tr>
<tr>
<td colspan="4" class="character-sheet-light-green">
<div style="padding:5px"><div id="advantage section"></div></div>
</td>
</tr>
<tr>
<td colspan="4" class="character-sheet-section-label">SKILLS <input type="button" value="Clear Skills" onClick="Main.skillSection.clear();" /></td>
</tr>
<tr>
<td colspan="4" class="character-sheet-light-green">
<div style="padding:5px"><div id="skill section"></div></div>
</td>
</tr>
<tr>
<td colspan="4" class="character-sheet-section-label">OFFENSE</td>
</tr>
<tr>
<td colspan="4" class="character-sheet-initiative">INITIATIVE <span id="initiative">+0</span></td>
</tr>
<tr>
<td colspan="4"><div id="offensive section"></div></td>
</tr>
<tr>
<td colspan="4" class="character-sheet-section-label">DEFENSE <input type="button" value="Clear Defenses" onClick="Main.defenseSection.clear();" /></td>
</tr>
<tr class="character-sheet-defense-green">
<td>DODGE</td>
<td><span id="Dodge start">0</span> + <input type="text" id="Dodge input" size="1" value="0" onChange="Main.defenseSection.getByName('Dodge').change();" /> = <span id="Dodge final">0</span></td>
<td>FORTITUDE</td>
<td><span id="Fortitude start">0</span> + <input type="text" id="Fortitude input" size="1" value="0" onChange="Main.defenseSection.getByName('Fortitude').change();" /> = <span id="Fortitude final">0</span></td>
</tr>
<tr class="character-sheet-defense-white">
<td>PARRY</td>
<td><span id="Parry start">0</span> + <input type="text" id="Parry input" size="1" value="0" onChange="Main.defenseSection.getByName('Parry').change();" /> = <span id="Parry final">0</span></td>
<td>TOUGHNESS</td>
<td><span id="Toughness">0</span></td>
</tr>
<tr class="character-sheet-defense-green">
<td>WILL</td>
<td><span id="Will start">0</span> + <input type="text" id="Will input" size="1" value="0" onChange="Main.defenseSection.getByName('Will').change();" /> = <span id="Will final">0</span></td>
<td colspan="2"></td>
</tr>
</tbody>
</table>
<div class="character-sheet-point-totals">CHARACTER POINT TOTALS: ABILITIES <span id="ability total">0</span> &#8226; POWERS <span id="power total">0</span> &#8226; ADVANTAGES <span id="advantage total">0</span> &#8226; SKILLS <span id="skill total">0</span> &#8226; DEFENSES <span id="defense total">0</span> = <span id="grand total used">0</span> / <span id="grand total max">0</span></div>
<br />
<textarea id="bio box" rows="10" cols="100">Complications, background and other information</textarea>
<br /><br />
<!--ruleset's value is set at the bottom of this file-->
<label>Rules: <input type="text" id="ruleset" size="1" onChange="Main.changeRuleset();" /></label>
Note that only the <a href="../meta/versioning.html">most recent rules</a> are fully supported.
<h2>Usage Notes</h2>
<div>
This page assumes you know all of the rules.<br />
If you don't know what Transcendence is then leave it at 0 and ignore it.<br />
There is no option for Transcendent equipment since God-like powers don't exist in mundane common items that can be
easily obtained.<br />
Power level is automatically set to the lowest possible value.<br />
Transcendence is automatically set to the lowest possible value using user input as the minimum value (with a default minimum of 0).<br />
Ranks in the Equipment Advantage are also automatically set to the lowest possible whenever the equipment section is
changed.<br />
Devices are created in the power section using removable.<br />
The Image Path input box can be absolute or relative (to the file). Only this can be saved (for security reasons) and
not any image given to the file upload button.<br />
Some modifiers (such as those that change range, action, and duration) are automatically set and can't be set manually.
Change the drop downs for range etc instead.<br />
In order to lack an ability put "--" in the ability input (without the quotes).<br />
Redundant powers, equipment, advantages and skills (those with the same type and subtype) are automatically removed.
<br />
To buy equipment that has no impact on any other section (including a vehicle or HQ) you may use Feature.<br />
This counter doesn't have a direct option for applying modifiers to existing traits, such as Impervious Toughness, you
may use Feature of the same cost to represent these (fill in the text).<br />
You must spend points in whole numbers, if you have an odd number of total ranks in skills you will see a half point.
<br />
The text area below is for loading and saving data. It is also cleared out on load in order to display error messages.<br />
Modifiers and advantages will show ranks for number of applications. If the cost isn't 1:1, the total will be to the right.<br />
There is no easy way to have enhanced trait affect other areas so instead apply the traits where needed and make a note
of how many are enhanced.<br />
There are some bugs I am aware of. Hopefully they won't be an issue.<br />
</div>
<br />
<span onClick="Main.saveToFile();"><a href="data:" download="" id="saveToFileLink">Save to File</a></span>
<!--Couldn't get the button to work which is why this is the only link-->
<!--<span onClick="Main.saveToFile();"><a href="data:" download="" id="saveToFileLink"><input type="button" value="Save to File" /></a></span>-->
<input type="button" value="Save To Text Area" onClick="Main.saveToTextArea();" id="save text button" />
<label>Save as:
<select id="saveType">
    <option>XML</option>
    <option>JSON</option>
</select>
</label>
<br />
<input type="file" id="fileChooser" accept=".xml,.js,.json" /><br />
<input type="button" value="Load from File" onClick="Main.loadFile();" />
<input type="button" value="Load from Text Area" onClick="Main.loadFromTextArea();" id="load text button" /><br />
<br />
<textarea id="code box" rows="30" cols="120">This text may be overwritten.</textarea>
<br /><br />
<!----
<span>Admin Powers:</span><br />
<input type="text" value="TestRunner.testAll();" id="commandText" /><input type="button" value="Execute" onClick="eval(document.getElementById('commandText').value);" /><br />
<a href="javascript:TestRunner.testAll();">Test All</a>, <a href="javascript:eval(document.getElementById('code box').value);">Eval Code Box</a>, and <a href="http://jsfiddle.net/" target="_new">jsfiddle</a><br /><br />
<textarea id="testResults" rows="20" cols="100"></textarea>
<!---->
<br /><br />
</div>
</div>
</td>
</tr>
</table>
<script type="text/javascript" src="../minorVersion.js"></script>
<script type="text/javascript">var Main;</script>
<script type="text/javascript" src="javascript/main.js"></script>
<script type="text/javascript">
//Main must be created after all functions have been defined
Main = new MainObject();
Object.freeze(Main);
Main.clear();  //in case the browser has cached some fields (wrong totals and onChange won't work) all other fields can stay as is
document.getElementById('ruleset').value = Main.getActiveRuleset().toString();

if (window.location.search.startsWith('?uploadPath='))
{(function(){
   var url = window.location.search.substring('?uploadPath='.length);
   var ajaxRequest = new XMLHttpRequest();
   ajaxRequest.onerror = function(messageOrEvent, source, lineNumber, columnNumber, error)
   {
      alert('Failed to load file:\n' + error);
      console.error('onerror:', messageOrEvent, error, ajaxRequest.status);
   };
   ajaxRequest.onreadystatechange = function()
   {
      try {
          if (ajaxRequest.readyState === XMLHttpRequest.DONE) {
            if (ajaxRequest.status === 404) {
              alert('Upload file not found.');
              console.error('onreadystatechange 404:', ajaxRequest, ajaxRequest.responseText);
            }
            else if (ajaxRequest.status >= 400) {
              alert('Failed to load file:\n' + ajaxRequest.status + '\n' + ajaxRequest.responseText);
              console.error('onreadystatechange 400+:', ajaxRequest, ajaxRequest.responseText);
            }
            //else is handled by onload
            else{
              console.log('onreadystatechange else:', ajaxRequest, ajaxRequest.status, ajaxRequest.responseText);
            }
          }
        }
        catch( error ) {
            alert('Failed to load file:\n' + error);
            console.error('onreadystatechange catch:', ajaxRequest, error);
        }
   };
   ajaxRequest.onload = function(progressEvent){Main.loadFromString(progressEvent.target.responseText);};
   ajaxRequest.open('GET', url, true);
   ajaxRequest.send();
})();}
</script>
</body>
</html>
